# -------------------------
# AUTH & USERS
# -------------------------

### 1) Register a new patient
# @name registerPatient
POST http://127.0.0.1:8000/api/users/register/
Content-Type: application/json

{
  "username": "Joe",
  "password": "Pass123",
  "email": "joe@example.com",
  "first_name": "Joe",
  "last_name": "Dooh",
  "phone_number": "0798765432",
  "role": "Patient"
}

### 2) Login as Patient
# @name loginPatient
POST http://127.0.0.1:8000/api/users/login/
Content-Type: application/json

{
  "username": "Joe",
  "password": "Pass123"
}

### 3) Register a new doctor
# @name registerDoctor
POST http://127.0.0.1:8000/api/users/register/
Content-Type: application/json

{
  "username": "doctor1",
  "password": "DoctorPass123",
  "email": "doctor1@example.com",
  "first_name": "Jane",
  "last_name": "Doe",
  "phone_number": "0788888888",
  "role": "Doctor"
}

### 4) Login as Doctor
# @name loginDoctor
POST http://127.0.0.1:8000/api/users/login/
Content-Type: application/json

{
  "username": "doctor1",
  "password": "DoctorPass123"
}

### 5) Register a new admin
# @name registerAdmin
POST http://127.0.0.1:8000/api/users/register/
Content-Type: application/json

{
  "username": "admin1",
  "password": "AdminPass123",
  "email": "admin@example.com",
  "first_name": "Alice",
  "last_name": "Smith",
  "phone_number": "0777777777",
  "role": "Admin"
}

### 6) Login as Admin
# @name loginAdmin
POST http://127.0.0.1:8000/api/users/login/
Content-Type: application/json

{
  "username": "admin1",
  "password": "AdminPass123"
}

# -------------------------
# PATIENT PROFILES
# -------------------------

### 7) Patient creates profile
# @name createPatientProfile
POST http://127.0.0.1:8000/api/patients/
Authorization: Bearer {{loginPatient.response.body.$.access}}
Content-Type: application/json

{
  "date_of_birth": "1990-05-10",
  "address": "Nairobi",
  "phone_number": "0798765432",
  "gender": "female",
  "id_number": "23567432"
}

### 8) Admin views all patient profiles
GET http://127.0.0.1:8000/api/patients/
Authorization: Bearer {{loginAdmin.response.body.$.access}}

# -------------------------
# APPOINTMENTS
# -------------------------

### 9) Patient creates an appointment
# @name createAppointment
POST http://127.0.0.1:8000/api/appointments/
Authorization: Bearer {{loginPatient.response.body.$.access}}
Content-Type: application/json

{
  "patient": {{createPatientProfile.response.body.$.id}},
  "doctor": {{registerDoctor.response.body.$.id}},
  "appointment_time": "2025-09-05T10:00:00+03:00",
  "service_type": "Regular check-up"
}

### 10) Doctor views all appointments
GET http://127.0.0.1:8000/api/appointments/
Authorization: Bearer {{loginDoctor.response.body.$.access}}

# -------------------------
# QUEUE
# -------------------------

### 11) Admin/Nurse adds appointment to queue
POST http://127.0.0.1:8000/api/queue/
Authorization: Bearer {{loginAdmin.response.body.$.access}}
Content-Type: application/json

{
  "appointment": {{createAppointment.response.body.$.id}},
  "position": 1,
  "status": "waiting"
}

### 12) View queue
GET http://127.0.0.1:8000/api/queue/
Authorization: Bearer {{loginAdmin.response.body.$.access}}

# -------------------------
# MEDICAL RECORDS
# -------------------------

### 13) Doctor creates a medical record
POST http://127.0.0.1:8000/api/records/
Authorization: Bearer {{loginDoctor.response.body.$.access}}
Content-Type: application/json

{
  "patient": {{createPatientProfile.response.body.$.id}},
  "diagnosis": "Flu",
  "treatment": "Rest and hydration",
  "notes": "Patient recovering well"
}

### 14) Patient views their own medical records
GET http://127.0.0.1:8000/api/records/
Authorization: Bearer {{loginPatient.response.body.$.access}}
